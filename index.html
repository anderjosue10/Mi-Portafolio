<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mi Portafolio | Desarrollador Full Stack</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  </head>
  <body>
    <button id="toggleChat" class="chat-btn">
      <i class="fas fa-robot"></i>
    </button>

    <div id="chatModal" class="chat-modal">
      <div class="chat-header">
        <span>Asistente IA</span>
        <span id="closeChat" class="close">&times;</span>
      </div>
      <div class="chat-body">
        <p>Pregunta lo que quieras!</p>
      </div>
      <div class="chat-footer">
        <input type="text" placeholder="Escribe un mensaje.." />
        <button>Enviar</button>
      </div>
    </div>

    <!-- Cursor personalizado -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Partículas de fondo -->
    <div id="particles-js"></div>

    <!-- Navegación Superior Derecha -->
    <nav class="top-right-nav">
      <div class="nav-buttons">
        <button class="nav-btn" id="projects-btn">
          <i class="fas fa-briefcase"></i>
          <span>Mis Proyectos</span>
        </button>
        <button class="nav-btn" id="certificates-btn">
          <i class="fas fa-certificate"></i>
          <span>Certificados</span>
        </button>
        <button class="nav-btn" id="microsoft-btn">
          <i class="fab fa-microsoft"></i>
          <span>Logros Microsoft</span>
        </button>
      </div>
    </nav>

    <!-- Sección Hero Centrada -->
    <section id="home" class="hero-centered">
      <div class="hero-content-centered">
        <!-- Imagen Central con Efectos -->
        <div class="hero-image-container">
          <div class="floating-orb orb-1"></div>
          <div class="floating-orb orb-2"></div>
          <div class="floating-orb orb-3"></div>
          <div class="fire-effect fire-1"></div>
          <div class="fire-effect fire-2"></div>
          <div class="fire-effect fire-3"></div>
          <div class="fire-effect fire-4"></div>
          <div class="image-glow"></div>
          <div class="central-image">
            <img
              src="images/ChatGPT Image 16 nov 2025, 12_26_43 p.m..png"
              alt="Anderson Josué Gutiérrez Rivera"
            />
          </div>
        </div>

        <!-- Título Profesional con Animaciones -->
        <div class="professional-title">
          <h1 class="title-full-stack">Desarrollador Full Stack</h1>
        </div>

        <!-- Herramientas Destacadas -->
        <div class="tools-highlight">
          <div class="tool-item">
            <i class="fas fa-mobile-alt"></i>
            <span>Móvil</span>
          </div>
          <div class="tool-item">
            <i class="fas fa-desktop"></i>
            <span>Escritorio</span>
          </div>
          <div class="tool-item">
            <i class="fas fa-globe"></i>
            <span>Web</span>
          </div>
        </div>

        <!-- Bloque Profesional -->
        <div class="developer-block">
          <div class="developer-content">
            <div class="developer-info">
              <h2 class="developer-name">ANDERSON JOSUE GUTIERREZ RIVERA</h2>
              <div class="tools-list">
                <div class="tool-grid">
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg"
                      alt="HTML"
                      title="HTML"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg"
                      alt="CSS"
                      title="CSS"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg"
                      alt="JavaScript"
                      title="JavaScript"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg"
                      alt="C#"
                      title="C#"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg"
                      alt="GitHub"
                      title="GitHub"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg"
                      alt="React Native"
                      title="React Native"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mongodb/mongodb-original.svg"
                      alt="MongoDB"
                      title="MongoDB"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/microsoftsqlserver/microsoftsqlserver-plain.svg"
                      alt="SQL Server"
                      title="SQL Server"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg"
                      alt="MySQL"
                      title="MySQL"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/laravel/laravel-original.svg"
                      alt="Laravel"
                      title="Laravel"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg"
                      alt="PHP"
                      title="PHP"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/apache/apache-original.svg"
                      alt="Apache"
                      title="Apache"
                    />
                  </div>
                  <div class="tool-logo">
                    <img
                      src="https://img.icons8.com/ios-filled/50/000000/api-settings.png"
                      alt="API REST"
                      title="API REST"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="developer-image">
              <img
                src="images/file_00000000a9fc61f7910e434c8b59644a.png"
                alt="Anderson Josué Gutiérrez Rivera"
              />
            </div>
          </div>
        </div>

        <!-- Información Profesional en Esquina Inferior -->
        <div class="professional-info-corner">
          <div class="engineer-title">Ingeniero en Sistemas</div>
          <div class="location-info">UNAN - Managua - CUR Matagalpa</div>
        </div>
      </div>
    </section>
    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-text">
            <p>
              &copy; 2025 ANDERSON JOSUE GUTIERREZ RIVERA. Todos los derechos
              reservados.
            </p>
          </div>
          <div class="footer-social">
            <a href="https://wa.me/1234567890" target="_blank" rel="noopener"
              ><i class="fab fa-whatsapp"></i
            ></a>
            <a
              href="https://instagram.com/tuusuario"
              target="_blank"
              rel="noopener"
              ><i class="fab fa-instagram"></i
            ></a>
            <a
              href="https://facebook.com/tuusuario"
              target="_blank"
              rel="noopener"
              ><i class="fab fa-facebook-f"></i
            ></a>
            <a
              href="https://linkedin.com/in/tuusuario"
              target="_blank"
              rel="noopener"
              ><i class="fab fa-linkedin-in"></i
            ></a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script src="js/main.js"></script>
<script>
// Configuración del chatbot móvil mejorado
document.addEventListener('DOMContentLoaded', function() {
    const chatModal = document.getElementById("chatModal");
    const toggleBtn = document.getElementById("toggleChat");
    const closeBtn = document.getElementById("closeChat");
    const chatBody = document.querySelector(".chat-body");
    const chatInput = document.querySelector(".chat-footer input");
    const chatSendBtn = document.querySelector(".chat-footer button");

    // URL de tu API desplegada en Vercel
    const API_URL = "https://root-folder-liart.vercel.app/api/gemini"; 

    // Variables para el arrastre
    let isDragging = false;
    let dragStartX = 0;
    let dragStartY = 0;
    let initialX = 0;
    let initialY = 0;
    let clickStartTime = 0;
    let isTouchDevice = 'ontouchstart' in window;

    // Estado del modal
    chatModal.style.display = "none";

    // Función para abrir/cerrar el chat
    function toggleChat() {
        if (chatModal.style.display === "block") {
            chatModal.style.display = "none";
        } else {
            chatModal.style.display = "block";
            // Enfocar el input cuando se abre
            setTimeout(() => {
                chatInput.focus();
            }, 300);
        }
    }

    // Función para determinar si fue un clic rápido (no arrastre)
    function isQuickClick() {
        const clickDuration = Date.now() - clickStartTime;
        return clickDuration < 200; // Si duró menos de 200ms, es un clic
    }

    // Event listeners MEJORADOS para móvil
    if (isTouchDevice) {
        // En dispositivos táctiles, solo usar touch events
        toggleBtn.addEventListener('touchstart', function(e) {
            clickStartTime = Date.now();
            isDragging = false;
            
            // Guardar posición inicial para posible arrastre
            const touch = e.touches[0];
            dragStartX = touch.clientX;
            dragStartY = touch.clientY;
            initialX = toggleBtn.offsetLeft;
            initialY = toggleBtn.offsetTop;
        });

        toggleBtn.addEventListener('touchend', function(e) {
            // Solo abrir si no estamos arrastrando y fue un clic rápido
            if (!isDragging && isQuickClick()) {
                e.preventDefault();
                e.stopPropagation();
                toggleChat();
            }
        });

        // Remover el event listener de click en dispositivos táctiles
        toggleBtn.addEventListener('click', function(e) {
            if (isTouchDevice) {
                e.preventDefault();
                e.stopPropagation();
            }
        });
    } else {
        // En desktop, usar mouse events normalmente
        toggleBtn.addEventListener('click', function(e) {
            if (!isDragging && isQuickClick()) {
                e.stopPropagation();
                toggleChat();
            }
        });
    }
    
    closeBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        chatModal.style.display = "none";
    });

    // Cerrar modal al hacer clic fuera - MEJORADO
    document.addEventListener("click", function(e) {
        // Si el modal está abierto y el clic fue fuera del modal Y fuera del botón
        if (chatModal.style.display === "block" && 
            !chatModal.contains(e.target) && 
            !toggleBtn.contains(e.target)) {
            chatModal.style.display = "none";
        }
    });

    // Prevenir que los clics dentro del modal cierren el modal
    chatModal.addEventListener("click", function(e) {
        e.stopPropagation();
    });

    // ========== SISTEMA DE ARRASTRE MEJORADO ==========

    // Mouse events para arrastrar (solo desktop)
    if (!isTouchDevice) {
        toggleBtn.addEventListener("mousedown", startDrag);
    }

    function startDrag(e) {
        clickStartTime = Date.now();
        isDragging = false;
        
        // Guardar posición inicial
        dragStartX = e.clientX;
        dragStartY = e.clientY;
        initialX = toggleBtn.offsetLeft;
        initialY = toggleBtn.offsetTop;
        
        document.addEventListener("mousemove", handleDrag);
        document.addEventListener("mouseup", stopDrag);
        
        toggleBtn.style.transition = 'none';
        toggleBtn.style.cursor = 'grabbing';
    }

    function handleDrag(e) {
        const deltaX = e.clientX - dragStartX;
        const deltaY = e.clientY - dragStartY;
        
        // Solo considerar como arrastre si se movió más de 8px
        if (Math.abs(deltaX) > 8 || Math.abs(deltaY) > 8) {
            isDragging = true;
            toggleBtn.classList.add("dragging");
        }
        
        if (isDragging) {
            const newX = initialX + deltaX;
            const newY = initialY + deltaY;
            
            // Limitar al área visible
            const maxX = window.innerWidth - toggleBtn.offsetWidth;
            const maxY = window.innerHeight - toggleBtn.offsetHeight;
            
            toggleBtn.style.left = Math.max(10, Math.min(newX, maxX - 10)) + "px";
            toggleBtn.style.top = Math.max(10, Math.min(newY, maxY - 10)) + "px";
            toggleBtn.style.right = "auto";
            toggleBtn.style.bottom = "auto";
        }
    }

    // Sistema de arrastre para touch (ya está integrado en los eventos de touchstart/touchmove)
    function handleDragTouch(e) {
        const touch = e.touches[0];
        const deltaX = touch.clientX - dragStartX;
        const deltaY = touch.clientY - dragStartY;
        
        if (Math.abs(deltaX) > 8 || Math.abs(deltaY) > 8) {
            isDragging = true;
            toggleBtn.classList.add("dragging");
        }
        
        if (isDragging) {
            const newX = initialX + deltaX;
            const newY = initialY + deltaY;
            
            const maxX = window.innerWidth - toggleBtn.offsetWidth;
            const maxY = window.innerHeight - toggleBtn.offsetHeight;
            
            toggleBtn.style.left = Math.max(10, Math.min(newX, maxX - 10)) + "px";
            toggleBtn.style.top = Math.max(10, Math.min(newY, maxY - 10)) + "px";
            toggleBtn.style.right = "auto";
            toggleBtn.style.bottom = "auto";
            
            e.preventDefault();
        }
    }

    function stopDrag() {
        document.removeEventListener("mousemove", handleDrag);
        document.removeEventListener("mouseup", stopDrag);
        
        toggleBtn.classList.remove("dragging");
        toggleBtn.style.transition = 'all 0.3s ease';
        toggleBtn.style.cursor = 'pointer';
        
        // Resetear estado de arrastre después de un pequeño delay
        setTimeout(() => {
            isDragging = false;
        }, 100);
    }

    // Eventos de arrastre para touch
    if (isTouchDevice) {
        toggleBtn.addEventListener("touchmove", handleDragTouch, { passive: false });
        
        toggleBtn.addEventListener("touchend", function(e) {
            document.removeEventListener("touchmove", handleDragTouch);
            toggleBtn.classList.remove("dragging");
            toggleBtn.style.transition = 'all 0.3s ease';
            
            setTimeout(() => {
                isDragging = false;
            }, 100);
        });
    }

    // ========== FUNCIONALIDAD DEL CHAT ==========

    // Función para enviar mensajes
    async function sendMessage() {
        const message = chatInput.value.trim();
        
        if (!message) return;

        // Agregar mensaje del usuario al chat
        addMessageToChat("user", message);
        chatInput.value = "";

        // Mostrar indicador de typing
        showTypingIndicator();

        try {
            const response = await fetch(API_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    prompt: message
                })
            });

            if (!response.ok) {
                throw new Error(`Error: ${response.status}`);
            }

            const data = await response.json();
            
            // Remover indicador de typing
            removeTypingIndicator();
            
            // Extraer la respuesta del chatbot
            const botResponse = extractBotResponse(data);
            
            // Agregar respuesta del bot al chat
            addMessageToChat("bot", botResponse);

        } catch (error) {
            console.error("Error:", error);
            removeTypingIndicator();
            addMessageToChat("bot", "Lo siento, hubo un error al procesar tu mensaje. Por favor, intenta nuevamente.");
        }
    }

    // Función para extraer la respuesta del bot
    function extractBotResponse(data) {
        try {
            return data.candidates[0].content.parts[0].text || 
                   data.contents[0].parts[0].text || 
                   "No pude procesar la respuesta.";
        } catch (err) {
            return "Error al procesar la respuesta del servidor.";
        }
    }

    // Función para agregar mensajes al chat
    function addMessageToChat(sender, message) {
        const messageElement = document.createElement("div");
        messageElement.className = `message ${sender}-message`;
        messageElement.innerHTML = `<p>${message}</p>`;
        chatBody.appendChild(messageElement);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    // Función para mostrar indicador de typing
    function showTypingIndicator() {
        const typingElement = document.createElement("div");
        typingElement.id = "typing-indicator";
        typingElement.className = "message bot-message typing";
        typingElement.innerHTML = `<p><i>Escribiendo...</i></p>`;
        chatBody.appendChild(typingElement);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    // Función para remover indicador de typing
    function removeTypingIndicator() {
        const typingElement = document.getElementById("typing-indicator");
        if (typingElement) {
            typingElement.remove();
        }
    }

    // Event listeners para enviar mensajes
    chatSendBtn.addEventListener("click", function(e) {
        e.stopPropagation();
        sendMessage();
    });
    
    chatInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
            e.stopPropagation();
            sendMessage();
        }
    });

    // Iniciar con efecto de pulso
    setTimeout(() => {
        toggleBtn.classList.add("pulse");
    }, 1000);

    // Prevenir arrastre accidental en móviles
    toggleBtn.addEventListener('touchstart', function(e) {
        if (e.touches.length > 1) {
            e.preventDefault();
        }
    }, { passive: false });
});
</script>
  </body>
</html>
